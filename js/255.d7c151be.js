(self["webpackChunko2_dashboard"]=self["webpackChunko2_dashboard"]||[]).push([[255],{1475:function(){(function(e,s,t){"use strict";L.AwesomeMarkers={},L.AwesomeMarkers.version="2.0.1",L.AwesomeMarkers.Icon=L.Icon.extend({options:{iconSize:[35,45],iconAnchor:[17,42],popupAnchor:[1,-32],shadowAnchor:[10,12],shadowSize:[36,16],className:"awesome-marker",prefix:"glyphicon",spinClass:"fa-spin",extraClasses:"",icon:"home",markerColor:"blue",iconColor:"white"},initialize:function(e){e=L.Util.setOptions(this,e)},createIcon:function(){var e=s.createElement("div"),t=this.options;return t.icon&&(e.innerHTML=this._createInner()),t.bgPos&&(e.style.backgroundPosition=-t.bgPos.x+"px "+-t.bgPos.y+"px"),this._setIconStyles(e,"icon-"+t.markerColor),e},_createInner:function(){var e,s="",t="",n="",i=this.options;return e=i.icon.slice(0,i.prefix.length+1)===i.prefix+"-"?i.icon:i.prefix+"-"+i.icon,i.spin&&"string"===typeof i.spinClass&&(s=i.spinClass),i.iconColor&&("white"===i.iconColor||"black"===i.iconColor?t="icon-"+i.iconColor:n="style='color: "+i.iconColor+"' "),"<i "+n+"class='"+i.extraClasses+" "+i.prefix+" "+e+" "+s+" "+t+"'></i>"},_setIconStyles:function(e,s){var t,n=this.options,i=L.point(n["shadow"===s?"shadowSize":"iconSize"]);t="shadow"===s?L.point(n.shadowAnchor||n.iconAnchor):L.point(n.iconAnchor),!t&&i&&(t=i.divideBy(2,!0)),e.className="awesome-marker-"+s+" "+n.className,t&&(e.style.marginLeft=-t.x+"px",e.style.marginTop=-t.y+"px"),i&&(e.style.width=i.x+"px",e.style.height=i.y+"px")},createShadow:function(){var e=s.createElement("div");return this._setIconStyles(e,"shadow"),e}}),L.AwesomeMarkers.icon=function(e){return new L.AwesomeMarkers.Icon(e)}})(0,document)},255:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>Y});var n=t(3673),i=t(2323);const a={class:"col-auto"},o={class:"text-grey-9"},r={class:"text-grey-5"},l={class:"q-gutter-y-xs"},c={class:"text-grey-7"},m={class:"text-grey-7"},d={key:0,class:"q-gutter-y-xs"},p={class:"text-grey-7"},u={class:"text-grey-7"},g={key:1,class:"q-gutter-y-xs"},h={class:"text-grey-7"},y={class:"text-grey-7"},w={class:"text-grey-7"},x=(0,n.Wm)("div",{class:"q-mb-sm"},"Permanent Drivers: ",-1),v=(0,n.Uk)("First: not assigned"),f=(0,n.Uk)("Second: not assigned"),k={class:"col-auto"},W={class:"text-grey-9"},z=(0,n.Wm)("div",{class:"text-grey-5"},"Warehouse",-1),_={class:"q-gutter-y-xs"},q={class:"text-grey-7"},I={class:"col-auto"};function C(e,s,t,L,C,b){const U=(0,n.up)("l-tile-layer"),j=(0,n.up)("q-separator"),A=(0,n.up)("q-icon"),S=(0,n.up)("l-tooltip"),M=(0,n.up)("l-marker"),H=(0,n.up)("l-circle"),D=(0,n.up)("l-map"),E=(0,n.up)("q-page"),Y=(0,n.up)("q-spinner");return e.isLoaded?((0,n.wg)(),(0,n.j4)(E,{key:0},{default:(0,n.w5)((()=>[(0,n.Wm)(D,{zoomAnimation:!0,"marker-zoom-animation":!0,center:e.center,zoom:e.company.zoom,options:{attributionControl:!1,zoomSnap:.5},class:"rounded-borders",style:{"min-height":"inherit"}},{default:(0,n.w5)((()=>[(0,n.Wm)(U,{url:"https://mt0.google.com/vt/lyrs=m&hl=en&x={x}&y={y}&z={z}&s={s}"}),((0,n.wg)(!0),(0,n.j4)(n.HY,null,(0,n.Ko)(e.vehicles,(s=>((0,n.wg)(),(0,n.j4)(M,{key:s.id,"lat-lng":e.getLatLng(s),icon:e.getMarkerIcon(s)},{default:(0,n.w5)((()=>[(0,n.Wm)(S,{style:{"font-size":"14px"}},{default:(0,n.w5)((()=>[(0,n.Wm)("div",a,[(0,n.Wm)("div",o,(0,i.zw)(s.name),1),(0,n.Wm)("div",r,"Vehicle (Type: "+(0,i.zw)(s.type)+")",1),(0,n.Wm)(j,{class:"q-my-sm"}),(0,n.Wm)("div",l,[(0,n.Wm)("div",c,[(0,n.Wm)(A,{name:"local_fire_department",class:"q-mr-xs",style:{"font-size":"20px"}}),(0,n.Uk)("Ignition: "+(0,i.zw)(s.ignition),1)]),(0,n.Wm)("div",m,[(0,n.Wm)(A,{name:"speed",class:"q-mr-xs",style:{"font-size":"20px"}}),(0,n.Uk)("Speed: "+(0,i.zw)(s.speed)+" km/h ",1)])]),(0,n.Wm)(j,{class:"q-my-sm"}),s.warehouse?((0,n.wg)(),(0,n.j4)("div",g,[(0,n.Wm)("div",h,[(0,n.Wm)(A,{name:"mdi-warehouse",class:"q-mr-xs",style:{"font-size":"20px"}}),(0,n.Uk)("In Warehouse: "+(0,i.zw)(s.warehouse.name)+" (ID: "+(0,i.zw)(s.warehouse.id)+") ",1)])])):((0,n.wg)(),(0,n.j4)("div",d,[(0,n.Wm)("div",p,[(0,n.Wm)(A,{name:"mdi-steering",class:"q-mr-xs",style:{"font-size":"20px"}}),(0,n.Uk)("Driver: "+(0,i.zw)(s.driver?s.driver.name:"Unknown"),1)]),(0,n.Wm)("div",u,[(0,n.Wm)(A,{name:"confirmation_number",class:"q-mr-xs",style:{"font-size":"20px"}}),(0,n.Uk)("Gatepass Destination: "+(0,i.zw)(s.gatepass?s.gatepass.warehouse.name+(s.gatepass.reviewed?"":" (UNREVIEWED)"):"No gatepass issued"),1)])])),(0,n.Wm)(j,{class:"q-my-sm"}),(0,n.Wm)("div",y,[(0,n.Wm)(A,{name:"mdi-counter",class:"q-mr-xs",style:{"font-size":"20px"}}),(0,n.Uk)("Odometer: "+(0,i.zw)(s.current_mileage)+" km ",1)]),(0,n.Wm)(j,{class:"q-my-sm"}),(0,n.Wm)("div",w,[x,(0,n.Wm)("div",null,[(0,n.Wm)(A,{name:"airline_seat_recline_normal",class:"q-mr-xs",style:{"font-size":"20px"}}),s.first_permanent_driver?((0,n.wg)(),(0,n.j4)(n.HY,{key:0},[(0,n.Uk)("First: "+(0,i.zw)(s.first_permanent_driver.name)+" (ID: "+(0,i.zw)(s.first_permanent_driver.id)+")",1)],64)):((0,n.wg)(),(0,n.j4)(n.HY,{key:1},[v],64))]),(0,n.Wm)("div",null,[(0,n.Wm)(A,{name:"airline_seat_recline_normal",class:"q-mr-xs",style:{"font-size":"20px"}}),s.second_permanent_driver?((0,n.wg)(),(0,n.j4)(n.HY,{key:0},[(0,n.Uk)("Second: "+(0,i.zw)(s.second_permanent_driver.name)+" (ID: "+(0,i.zw)(s.second_permanent_driver.id)+")",1)],64)):((0,n.wg)(),(0,n.j4)(n.HY,{key:1},[f],64))])])])])),_:2},1024)])),_:2},1032,["lat-lng","icon"])))),128)),((0,n.wg)(!0),(0,n.j4)(n.HY,null,(0,n.Ko)(e.warehouses,(s=>((0,n.wg)(),(0,n.j4)(M,{key:s.id,"lat-lng":e.getLatLng(s),icon:e.getMarkerIcon(s)},{default:(0,n.w5)((()=>[(0,n.Wm)(S,{style:{"font-size":"14px"}},{default:(0,n.w5)((()=>[(0,n.Wm)("div",k,[(0,n.Wm)("div",W,(0,i.zw)(s.name),1),z,(0,n.Wm)(j,{class:"q-my-sm"}),(0,n.Wm)("div",_,[(0,n.Wm)("div",q,[(0,n.Wm)(A,{name:"mdi-radius",class:"q-mr-xs",style:{"font-size":"20px"}}),(0,n.Uk)("Radius: "+(0,i.zw)(s.radius)+" m ",1)])])])])),_:2},1024)])),_:2},1032,["lat-lng","icon"])))),128)),((0,n.wg)(!0),(0,n.j4)(n.HY,null,(0,n.Ko)(e.warehouses,(s=>((0,n.wg)(),(0,n.j4)(H,{key:s.id,"lat-lng":e.getLatLng(s),radius:s.radius,"fill-color":"#717172","fill-opacity":.2,fill:!0,weight:.6,color:"#717172"},null,8,["lat-lng","radius","fill-opacity","weight"])))),128))])),_:1},8,["center","zoom","options"])])),_:1})):((0,n.wg)(),(0,n.j4)(E,{key:1,class:"flex flex-center"},{default:(0,n.w5)((()=>[(0,n.Wm)("div",I,[(0,n.Wm)(Y,{color:"blue-9",size:"50px"})])])),_:1}))}var b=t(385),U=t(8892);t(1475);const j=(0,n.aZ)({name:"Dashboard",components:{LMap:U.iA,LTileLayer:U.Hw,LMarker:U.$R,LTooltip:U.Gs,LCircle:U.J_},data(){return{isLoaded:!1,company:null,center:null,timer:null,warehouses:[],vehicles:[]}},methods:{fetchEntities(){this.$api.get("/company/"+this.$store.getters["auth/user"].company.slug+"/entities").then((e=>{this.warehouses=e.data.warehouses,this.vehicles=e.data.vehicles,this.isLoaded=!0})).catch((e=>{var s;this.$q.notify({message:void 0!==e.response.data.messages&&e.response.data.messages.length?e.response.data.messages[0]:null!==(s=e.response.data.message)&&void 0!==s?s:"Failed to execute this operation.",color:"red-9"})}))},getMarkerIcon(e){var s;return L.AwesomeMarkers.icon({prefix:"mdi",icon:null!==(s=e.icon)&&void 0!==s?s:"warehouse",markerColor:e.color,iconColor:"white"})},getLatLng(e){return e.latitude?(0,b.latLng)(e.latitude,e.longitude):null}},mounted(){this.$api.get("/company/"+this.$store.getters["auth/user"].company.slug).then((e=>{this.company=e.data,this.center=(0,b.latLng)(this.company.latitude,this.company.longitude),this.fetchEntities(),this.timer=setInterval((()=>{this.fetchEntities()}),5e3)}))},beforeUnmount(){clearInterval(this.timer)}});var A=t(4379),S=t(5869),M=t(4554),H=t(9754),D=t(7518),E=t.n(D);j.render=C;const Y=j;E()(j,"components",{QPage:A.Z,QSeparator:S.Z,QIcon:M.Z,QSpinner:H.Z})}}]);
(self["webpackChunko2_dashboard"]=self["webpackChunko2_dashboard"]||[]).push([[104],{1475:function(){(function(e,o,t){"use strict";L.AwesomeMarkers={},L.AwesomeMarkers.version="2.0.1",L.AwesomeMarkers.Icon=L.Icon.extend({options:{iconSize:[35,45],iconAnchor:[17,42],popupAnchor:[1,-32],shadowAnchor:[10,12],shadowSize:[36,16],className:"awesome-marker",prefix:"glyphicon",spinClass:"fa-spin",extraClasses:"",icon:"home",markerColor:"blue",iconColor:"white"},initialize:function(e){e=L.Util.setOptions(this,e)},createIcon:function(){var e=o.createElement("div"),t=this.options;return t.icon&&(e.innerHTML=this._createInner()),t.bgPos&&(e.style.backgroundPosition=-t.bgPos.x+"px "+-t.bgPos.y+"px"),this._setIconStyles(e,"icon-"+t.markerColor),e},_createInner:function(){var e,o="",t="",a="",s=this.options;return e=s.icon.slice(0,s.prefix.length+1)===s.prefix+"-"?s.icon:s.prefix+"-"+s.icon,s.spin&&"string"===typeof s.spinClass&&(o=s.spinClass),s.iconColor&&("white"===s.iconColor||"black"===s.iconColor?t="icon-"+s.iconColor:a="style='color: "+s.iconColor+"' "),"<i "+a+"class='"+s.extraClasses+" "+s.prefix+" "+e+" "+o+" "+t+"'></i>"},_setIconStyles:function(e,o){var t,a=this.options,s=L.point(a["shadow"===o?"shadowSize":"iconSize"]);t="shadow"===o?L.point(a.shadowAnchor||a.iconAnchor):L.point(a.iconAnchor),!t&&s&&(t=s.divideBy(2,!0)),e.className="awesome-marker-"+o+" "+a.className,t&&(e.style.marginLeft=-t.x+"px",e.style.marginTop=-t.y+"px"),s&&(e.style.width=s.x+"px",e.style.height=s.y+"px")},createShadow:function(){var e=o.createElement("div");return this._setIconStyles(e,"shadow"),e}}),L.AwesomeMarkers.icon=function(e){return new L.AwesomeMarkers.Icon(e)}})(0,document)},8104:(e,o,t)=>{"use strict";t.r(o),t.d(o,{default:()=>A});var a=t(3673),s=t(2323);const r=(0,a.HX)("data-v-c53a2bda");(0,a.dD)("data-v-c53a2bda");const l=(0,a.Wm)("div",{class:"text-h4 q-mb-lg"},"Edit Warehouse",-1),i={class:"text-subtitle2 q-mb-lg"},n={class:"row q-gutter-y-md"},u={class:"col-xs-12 col-sm-6 col-md-4"},c=(0,a.Wm)("div",{class:"text-body2 q-pt-md"},"meter(s)",-1),d=(0,a.Wm)("div",{class:"text-subtitle1 text-grey-9"},"Warehouse Location",-1),h=(0,a.Wm)("div",{class:"text-body2 text-grey-6 q-mb-md"},"Click on the map to pick a location for the warehouse.",-1),m={class:"q-mb-md"},p=(0,a.Wm)("div",{class:"q-pl-xs full-width text-grey-8"},"Coordinates: ",-1),w=(0,a.Uk)(" Warehouse Location "),g={class:"row justify-end q-mt-md"},b={class:"col-auto"};(0,a.Cn)();const k=r(((e,o,t,k,f,y)=>{const x=(0,a.up)("q-btn"),L=(0,a.up)("q-input"),v=(0,a.up)("q-select"),q=(0,a.up)("q-chip"),W=(0,a.up)("l-tile-layer"),C=(0,a.up)("l-tooltip"),z=(0,a.up)("l-marker"),_=(0,a.up)("l-circle"),V=(0,a.up)("l-map"),S=(0,a.up)("q-page"),A=(0,a.up)("q-spinner");return f.isLoaded&&y.hasPermission?((0,a.wg)(),(0,a.j4)(S,{key:0,padding:""},{default:r((()=>[(0,a.Wm)(x,{flat:"","no-caps":"",color:"blue-9",icon:"arrow_back",label:"back to warehouses list",class:"q-pl-none q-pr-xs q-mb-md",onClick:o[1]||(o[1]=o=>e.$router.push("/warehouses"))}),l,(0,a.Wm)("div",i,"Warehouse ID: "+(0,s.zw)(f.warehouse.id),1),(0,a.Wm)("div",n,[(0,a.Wm)("div",u,[(0,a.Wm)(L,{filled:"",modelValue:f.warehouse.name,"onUpdate:modelValue":o[2]||(o[2]=e=>f.warehouse.name=e),label:"Warehouse Name","stack-label":"",class:"q-mb-lg q-pr-none q-mr-none",hint:"Type in your new warehouse's name. This can be shown on the dashboard map."},null,8,["modelValue"]),(0,a.Wm)(v,{class:"q-mb-md",filled:"",modelValue:f.warehouse.color,"onUpdate:modelValue":o[3]||(o[3]=e=>f.warehouse.color=e),hint:"This will be the warehouse's marker's color shown on the map. Pick a location using the map below to preview.",options:["red","darkred","lightred","orange","beige","green","darkgreen","lightgreen","blue","darkblue","lightblue","purple","darkpurple","pink","cadetblue","gray","lightgray","black"],label:"Warehouse Marker Color","stack-label":""},null,8,["modelValue"]),(0,a.Wm)(L,{filled:"",modelValue:f.warehouse.radius,"onUpdate:modelValue":o[4]||(o[4]=e=>f.warehouse.radius=e),"input-class":"text-right items-center",label:"Warehouse Radius","stack-label":"",mask:"#######",class:"q-mb-lg q-pr-none q-mr-none",hint:"Vehicles are considered inside the warehouse area once entered radius."},{append:r((()=>[c])),_:1},8,["modelValue"]),d,h,(0,a.Wm)("div",m,[p,(0,a.Wm)(L,{filled:"",modelValue:f.warehouse.latitude,"onUpdate:modelValue":o[5]||(o[5]=e=>f.warehouse.latitude=e),"input-class":"text-right items-center",label:"Warehouse Latitude","stack-label":"",class:"q-mb-lg q-pr-none q-mr-none"},null,8,["modelValue"]),(0,a.Wm)(L,{filled:"",modelValue:f.warehouse.longitude,"onUpdate:modelValue":o[6]||(o[6]=e=>f.warehouse.longitude=e),"input-class":"text-right items-center",label:"Warehouse Longitude","stack-label":"",class:"q-mb-lg q-pr-none q-mr-none"},null,8,["modelValue"]),(0,a.Wm)(q,{square:"",class:"text-grey-8"},{default:r((()=>{var e;return[(0,a.Uk)("Latitude: "+(0,s.zw)(null!==(e=(f.warehouse.latitude/1).toFixed(5))&&void 0!==e?e:"Not Set"),1)]})),_:1}),(0,a.Wm)(q,{square:"",class:"text-grey-8"},{default:r((()=>{var e;return[(0,a.Uk)("Longitude: "+(0,s.zw)(null!==(e=(f.warehouse.longitude/1).toFixed(5))&&void 0!==e?e:"Not Set"),1)]})),_:1})]),(0,a.Wm)(V,{center:f.center,style:{height:"40vh"},zoomAnimation:!0,"marker-zoom-animation":!0,zoom:f.zoom,onClick:y.mark,class:"rounded-borders",options:{attributionControl:!1,zoomSnap:.5}},{default:r((()=>[(0,a.Wm)(W,{url:"https://mt0.google.com/vt/lyrs=m&hl=en&x={x}&y={y}&z={z}&s={s}"}),y.warehouseLatLng?((0,a.wg)(),(0,a.j4)(z,{key:0,"lat-lng":y.warehouseLatLng,icon:y.markerIcon},{default:r((()=>[(0,a.Wm)(C,null,{default:r((()=>[w])),_:1})])),_:1},8,["lat-lng","icon"])):(0,a.kq)("",!0),y.warehouseLatLng?((0,a.wg)(),(0,a.j4)(_,{key:1,"lat-lng":y.warehouseLatLng,radius:e.radius,"fill-color":"#717172","fill-opacity":.2,fill:!0,weight:.6,color:"#717172"},null,8,["lat-lng","radius","fill-opacity","weight"])):(0,a.kq)("",!0)])),_:1},8,["center","zoom","onClick","options"]),(0,a.Wm)("div",g,[(0,a.Wm)(x,{color:"blue-9",label:"Submit",onClick:y.sendCreate},null,8,["onClick"])])])])])),_:1})):((0,a.wg)(),(0,a.j4)(S,{key:1,class:"flex flex-center"},{default:r((()=>[(0,a.Wm)("div",b,[(0,a.Wm)(A,{color:"blue-9",size:"50px"})])])),_:1}))}));var f=t(385),y=t(8892);t(1475);const x={name:"CreateWarehouse",components:{LMap:y.iA,LTileLayer:y.Hw,LMarker:y.$R,LTooltip:y.Gs,LCircle:y.J_},props:["id"],data(){return{name:"",isLoaded:!1,warehouse:null,center:(0,f.latLng)(0,0),zoom:6}},computed:{hasPermission(){return!!this.$store.getters["auth/isSuperUser"]||this.$store.state.auth.user.level>=3},markerIcon(){return L.AwesomeMarkers.icon({prefix:"mdi",icon:"warehouse",markerColor:this.warehouse.color,iconColor:"white"})},warehouseLatLng(){return this.warehouse.latitude?(0,f.latLng)(this.warehouse.latitude,this.warehouse.longitude):null}},watch:{hasPermission(e){e||this.unauthorizedRedirect()}},mounted(){this.hasPermission?this.$api.get("/warehouse/"+this.$route.params.id).then((e=>{var o;this.warehouse=e.data,this.center=(0,f.latLng)(this.warehouse.latitude,this.warehouse.longitude),this.zoom=null!==(o=this.$store.state.auth.user.company.zoom)&&void 0!==o?o:6,this.isLoaded=!0})):this.unauthorizedRedirect()},methods:{mark(e){e.latlng&&(this.warehouse.latitude=e.latlng.lat,this.warehouse.longitude=e.latlng.lng)},sendCreate(){this.$api.post("/warehouse/"+this.warehouse.id+"/update",this.warehouse).then((e=>{this.$router.push("/warehouses"),this.$q.notify({message:e.data.messages[0],color:"green-9"})})).catch((e=>{var o;this.$q.notify({message:null!==(o=e.response.data.message)&&void 0!==o?o:"Failed to execute this operation.",color:"red-9"})}))}}};var v=t(4379),q=t(2165),W=t(4842),C=t(3314),z=t(7030),_=t(9754),V=t(7518),S=t.n(V);x.render=k,x.__scopeId="data-v-c53a2bda";const A=x;S()(x,"components",{QPage:v.Z,QBtn:q.Z,QInput:W.Z,QSelect:C.Z,QChip:z.Z,QSpinner:_.Z})}}]);
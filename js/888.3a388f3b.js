"use strict";(self["webpackChunko2_dashboard"]=self["webpackChunko2_dashboard"]||[]).push([[888],{9888:(e,a,s)=>{s.r(a),s.d(a,{default:()=>_});var t=s(3673),o=s(2323);const n=(0,t.HX)("data-v-4712009e");(0,t.dD)("data-v-4712009e");const l={class:"col q-pa-lg"},i={key:0,class:"row justify-center"},r={class:"col-auto"},d={class:"row justify-center q-mb-md"},m={key:1,class:"row justify-center items-center"};(0,t.Cn)();const u=n(((e,a,s,u,c,p)=>{const h=(0,t.up)("q-card-section"),g=(0,t.up)("q-icon"),y=(0,t.up)("q-input"),w=(0,t.up)("q-checkbox"),b=(0,t.up)("q-btn"),f=(0,t.up)("q-card"),$=(0,t.up)("q-spinner"),q=(0,t.up)("q-page"),k=(0,t.up)("q-page-container"),W=(0,t.up)("q-layout");return(0,t.wg)(),(0,t.j4)(W,null,{default:n((()=>[(0,t.Wm)(k,null,{default:n((()=>[(0,t.Wm)(q,{class:"window-height window-width row justify-center items-center bg-blue-5"},{default:n((()=>[(0,t.Wm)("div",l,[!1===e.$store.state.auth.authenticated&&c.isLoaded?((0,t.wg)(),(0,t.j4)("div",i,[(0,t.Wm)("div",r,[(0,t.Wm)("div",d,[c.companyLogo?((0,t.wg)(),(0,t.j4)("img",{key:0,src:c.companyLogo,alt:c.companyName,width:"128",height:"128"},null,8,["src","alt"])):(0,t.kq)("",!0)]),(0,t.Wm)(f,{style:{"max-width":"400px"}},{default:n((()=>[(0,t.Wm)(h,{class:"bg-blue-8 text-h5 text-white shadow-24"},{default:n((()=>[(0,t.Uk)((0,o.zw)(c.companyName)+" Login ",1)])),_:1}),(0,t.Wm)(h,{class:"q-gutter-y-sm q-pb-none q-mb-none"},{default:n((()=>[(0,t.Wm)(y,{color:"bg-blue-8",filled:"",modelValue:c.username,"onUpdate:modelValue":a[1]||(a[1]=e=>c.username=e),label:"Username","stack-label":""},{prepend:n((()=>[(0,t.Wm)(g,{name:"person"})])),_:1},8,["modelValue"]),(0,t.Wm)(y,{modelValue:c.password,"onUpdate:modelValue":a[3]||(a[3]=e=>c.password=e),filled:"",type:c.isPwd?"password":"text",label:"Password","stack-label":""},{prepend:n((()=>[(0,t.Wm)(g,{name:"password"})])),append:n((()=>[(0,t.Wm)(g,{name:c.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[2]||(a[2]=e=>c.isPwd=!c.isPwd)},null,8,["name"])])),_:1},8,["modelValue","type"]),(0,t.Wm)(w,{"left-label":"",modelValue:c.remember,"onUpdate:modelValue":a[4]||(a[4]=e=>c.remember=e),label:"Keep me logged in"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(h,null,{default:n((()=>[(0,t.Wm)(b,{color:"blue-8",label:"Log In",class:"full-width",onClick:p.login,loading:c.loggingIn,disable:c.loggingIn},null,8,["onClick","loading","disable"])])),_:1})])),_:1})])])):((0,t.wg)(),(0,t.j4)("div",m,[(0,t.Wm)($,{color:"white",size:"50px"})]))])])),_:1})])),_:1})])),_:1})})),c={name:"Login",data(){return{isLoaded:!1,companyName:"",companyImage:"",loggingIn:!1,username:"",password:"",remember:!1,isPwd:!0,companyLogo:null}},computed:{authenticated(){return this.$store.getters["auth/authenticated"]}},watch:{authenticated(e){e&&this.$router.push("/")}},methods:{login(){this.username&&this.password?(this.loggingIn=!0,this.$api.post("/login",{company:this.$route.params.company,username:this.username,password:this.password,remember:this.remember},{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}}).then((e=>{this.loggingIn=!1,this.$store.dispatch("auth/checkAuth")&&(this.$router.push("/"),this.$q.notify({message:"You are now logged in as: "+this.$store.state.auth.user.name,color:"green-7"}))})).catch((e=>{var a;this.loggingIn=!1,console.log(e),this.$q.notify({message:void 0!==e.response.data.messages&&e.response.data.messages.length?e.response.data.messages[0]:null!==(a=e.response.data.message)&&void 0!==a?a:"Failed to log in.",color:"red-7"})}))):this.$q.notify({message:"Please enter your username and password.",color:"red-7"})}},mounted(){this.$api.get("/company/"+this.$route.params.company+"/logo").then((e=>{this.companyLogo=this.$api.defaults.baseURL+"/company/"+this.$route.params.company+"/logo"})),this.$store.state["auth/authenticated"]&&(this.$router.push("/"),this.$q.notify({message:"You are already logged in.",color:"yellow-9"}))},created(){this.$api.get("/company/"+this.$route.params.company,{headers:{accept:"application/json"}}).then((e=>{this.companyName=e.data.name,this.isLoaded=!0})).catch((e=>{this.$router.push("/"),this.$q.notify({message:e.message,color:"red-7"}),this.$q.notify({message:"You can't log in there. Check your address with your company.",color:"red-7"})}))}};var p=s(9214),h=s(2652),g=s(4379),y=s(151),w=s(5589),b=s(4842),f=s(4554),$=s(1420),q=s(2165),k=s(9754),W=s(7518),v=s.n(W);c.render=u,c.__scopeId="data-v-4712009e";const _=c;v()(c,"components",{QLayout:p.Z,QPageContainer:h.Z,QPage:g.Z,QCard:y.Z,QCardSection:w.Z,QInput:b.Z,QIcon:f.Z,QCheckbox:$.Z,QBtn:q.Z,QSpinner:k.Z})}}]);
(self["webpackChunko2_dashboard"]=self["webpackChunko2_dashboard"]||[]).push([[893],{1475:function(){(function(e,s,a){"use strict";L.AwesomeMarkers={},L.AwesomeMarkers.version="2.0.1",L.AwesomeMarkers.Icon=L.Icon.extend({options:{iconSize:[35,45],iconAnchor:[17,42],popupAnchor:[1,-32],shadowAnchor:[10,12],shadowSize:[36,16],className:"awesome-marker",prefix:"glyphicon",spinClass:"fa-spin",extraClasses:"",icon:"home",markerColor:"blue",iconColor:"white"},initialize:function(e){e=L.Util.setOptions(this,e)},createIcon:function(){var e=s.createElement("div"),a=this.options;return a.icon&&(e.innerHTML=this._createInner()),a.bgPos&&(e.style.backgroundPosition=-a.bgPos.x+"px "+-a.bgPos.y+"px"),this._setIconStyles(e,"icon-"+a.markerColor),e},_createInner:function(){var e,s="",a="",t="",o=this.options;return e=o.icon.slice(0,o.prefix.length+1)===o.prefix+"-"?o.icon:o.prefix+"-"+o.icon,o.spin&&"string"===typeof o.spinClass&&(s=o.spinClass),o.iconColor&&("white"===o.iconColor||"black"===o.iconColor?a="icon-"+o.iconColor:t="style='color: "+o.iconColor+"' "),"<i "+t+"class='"+o.extraClasses+" "+o.prefix+" "+e+" "+s+" "+a+"'></i>"},_setIconStyles:function(e,s){var a,t=this.options,o=L.point(t["shadow"===s?"shadowSize":"iconSize"]);a="shadow"===s?L.point(t.shadowAnchor||t.iconAnchor):L.point(t.iconAnchor),!a&&o&&(a=o.divideBy(2,!0)),e.className="awesome-marker-"+s+" "+t.className,a&&(e.style.marginLeft=-a.x+"px",e.style.marginTop=-a.y+"px"),o&&(e.style.width=o.x+"px",e.style.height=o.y+"px")},createShadow:function(){var e=s.createElement("div");return this._setIconStyles(e,"shadow"),e}}),L.AwesomeMarkers.icon=function(e){return new L.AwesomeMarkers.Icon(e)}})(0,document)},3893:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>ie});a(7280);var t=a(3673),o=a(2323),l=a(8880);const i=(0,t.HX)("data-v-ce1fd992");(0,t.dD)("data-v-ce1fd992");const r=(0,t.Wm)("div",{class:"text-h4"},"Warehouses",-1),n=(0,t.Wm)("div",{class:"text-subtitle1 q-mb-lg"},"All warehouses registered in your company.",-1),d={class:"row q-gutter-y-sm"},c={class:"col-xs-12 col-sm-6"},u=(0,t.Wm)("div",{class:"q-pl-xs full-width text-grey-8"},"Profile: ",-1),m={class:"row"},h={class:"col-xs-12 col-sm-6 q-pr-sm-md"},p=(0,t.Wm)("div",{class:"q-pl-xs q-mt-md full-width text-grey-8 q-pr-sm"},"Vehicles in the warehouse: ",-1),g={key:1},w={class:"col-xs-12 col-sm-6"},f=(0,t.Wm)("div",{class:"q-pl-xs q-mt-md full-width text-grey-8 q-pr-sm"},"Drivers available: ",-1),y={key:1},v=(0,t.Wm)("div",{class:"q-pl-xs full-width text-grey-8 q-mt-md"},"Commands: ",-1),W={class:"row q-gutter-x-md q-gutter-y-sm"},k={class:"col-xs-12 col-sm-6"},x={class:"col-auto"},b={class:"text-grey-9"},q=(0,t.Wm)("div",{class:"text-grey-5"},"Warehouse",-1),_={class:"q-gutter-y-xs"},C={class:"text-grey-7"},z={key:1,class:"row justify-center items-center"},I={key:1,class:"col-auto"},A=(0,t.Wm)("div",{class:"text-h6"},"Are you sure?",-1),j={class:"q-mb-md"},Q=(0,t.Wm)("br",null,null,-1),Z=(0,t.Uk)("This request can not be undone once performed."),S={class:"col-auto"};(0,t.Cn)();const U=i(((e,s,a,L,U,D)=>{const $=(0,t.up)("q-icon"),V=(0,t.up)("q-input"),T=(0,t.up)("q-chip"),M=(0,t.up)("q-item-section"),H=(0,t.up)("q-item-label"),P=(0,t.up)("q-item"),N=(0,t.up)("q-list"),E=(0,t.up)("q-btn"),Y=(0,t.up)("l-tile-layer"),F=(0,t.up)("q-separator"),R=(0,t.up)("l-tooltip"),K=(0,t.up)("l-marker"),B=(0,t.up)("l-circle"),G=(0,t.up)("l-map"),J=(0,t.up)("q-card-section"),O=(0,t.up)("q-card"),X=(0,t.up)("q-expansion-item"),ee=(0,t.up)("q-card-actions"),se=(0,t.up)("q-dialog"),ae=(0,t.up)("q-page-sticky"),te=(0,t.up)("q-page"),oe=(0,t.up)("q-spinner"),le=(0,t.Q2)("ripple"),ie=(0,t.Q2)("close-popup");return U.isLoaded?((0,t.wg)(),(0,t.j4)(te,{key:0,padding:""},{default:i((()=>[r,n,(0,t.Wm)(V,{modelValue:U.search,"onUpdate:modelValue":s[1]||(s[1]=e=>U.search=e),debounce:"500",filled:"",placeholder:"Search",hint:"Type in the warehouse's name.",class:"q-mb-lg"},{append:i((()=>[(0,t.Wm)($,{name:"search"})])),_:1},8,["modelValue"]),U.warehouses.length?(0,t.wy)(((0,t.wg)(),(0,t.j4)(N,{key:0,bordered:"",class:"rounded-borders"},{default:i((()=>[((0,t.wg)(!0),(0,t.j4)(t.HY,null,(0,t.Ko)(U.warehouses,(s=>((0,t.wg)(),(0,t.j4)(X,{key:s.id,"expand-separator":"",icon:"mdi-warehouse",label:s.name,"default-opened":"",modelValue:U.vehicleTabs[s.id],"onUpdate:modelValue":e=>U.vehicleTabs[s.id]=e},{default:i((()=>[(0,t.Wm)(O,null,{default:i((()=>[(0,t.Wm)(J,null,{default:i((()=>[(0,t.Wm)("div",d,[(0,t.Wm)("div",c,[u,(0,t.Wm)(T,{square:"",class:"text-grey-8"},{default:i((()=>[(0,t.Uk)("Warehouse ID: "+(0,o.zw)(s.id),1)])),_:2},1024),(0,t.Wm)(T,{square:"",class:"text-grey-8"},{default:i((()=>[(0,t.Uk)("Warehouse Radius: "+(0,o.zw)(s.radius)+" m",1)])),_:2},1024),(0,t.Wm)("div",m,[(0,t.Wm)("div",h,[p,s.vehicles.length?((0,t.wg)(),(0,t.j4)(N,{key:0,separator:""},{default:i((()=>[((0,t.wg)(!0),(0,t.j4)(t.HY,null,(0,t.Ko)(s.vehicles,(e=>(0,t.wy)(((0,t.wg)(),(0,t.j4)(P,{clickable:"",key:e.id},{default:i((()=>[(0,t.Wm)(M,null,{default:i((()=>[(0,t.Wm)(M,{avatar:""},{default:i((()=>[(0,t.Wm)($,{name:"mdi-"+e.icon},null,8,["name"])])),_:2},1024),(0,t.Wm)(H,null,{default:i((()=>[(0,t.Uk)((0,o.zw)(e.name),1)])),_:2},1024),(0,t.Wm)(H,{caption:""},{default:i((()=>[(0,t.Uk)("ID: "+(0,o.zw)(e.id),1)])),_:2},1024)])),_:2},1024)])),_:2},1536)),[[le]]))),128))])),_:2},1024)):((0,t.wg)(),(0,t.j4)("div",g,"No vehicle found."))]),(0,t.Wm)("div",w,[f,s.drivers.length?((0,t.wg)(),(0,t.j4)(t.HY,{key:0},[s.drivers.length?((0,t.wg)(),(0,t.j4)(N,{key:0,separator:""},{default:i((()=>[((0,t.wg)(!0),(0,t.j4)(t.HY,null,(0,t.Ko)(s.drivers,(e=>(0,t.wy)(((0,t.wg)(),(0,t.j4)(P,{clickable:"",key:e.id},{default:i((()=>[(0,t.Wm)(M,null,{default:i((()=>[(0,t.Wm)(M,{avatar:""},{default:i((()=>[(0,t.Wm)($,{name:"'airline_seat_recline_normal"})])),_:1}),(0,t.Wm)(H,null,{default:i((()=>[(0,t.Uk)((0,o.zw)(e.name),1)])),_:2},1024),(0,t.Wm)(H,{caption:""},{default:i((()=>[(0,t.Uk)("ID: "+(0,o.zw)(e.id),1)])),_:2},1024)])),_:2},1024)])),_:2},1536)),[[le]]))),128))])),_:2},1024)):(0,t.kq)("",!0)],64)):((0,t.wg)(),(0,t.j4)("div",y,"No driver found."))])]),e.$store.getters["auth/isSuperUser"]||e.$store.state.auth.user.level>=3?((0,t.wg)(),(0,t.j4)(t.HY,{key:0},[v,(0,t.Wm)("div",W,[(0,t.Wm)(E,{color:"blue-9",label:"Edit warehouse",icon:"edit",onClick:a=>e.$router.push("/warehouses/"+s.id+"/edit")},null,8,["onClick"]),(0,t.Wm)(E,{color:"red-7",label:"Delete warehouse",icon:"delete",onClick:e=>{U.deleting=s,U.showDeleteDialog=!0}},null,8,["onClick"])])],64)):(0,t.kq)("",!0)]),(0,t.Wm)("div",k,[s.latitude?((0,t.wg)(),(0,t.j4)(G,{key:0,zoomAnimation:!0,"marker-zoom-animation":!0,center:D.vehicleLatLng(s),zoom:U.zoom[s.id],options:{attributionControl:!1,zoomSnap:.5},class:"rounded-borders",style:{"min-height":"200px"}},{default:i((()=>[(0,t.Wm)(Y,{url:"https://mt0.google.com/vt/lyrs=m&hl=en&x={x}&y={y}&z={z}&s={s}"}),(0,t.Wm)(K,{"lat-lng":D.vehicleLatLng(s),icon:D.getMarkerIcon(s)},{default:i((()=>[(0,t.Wm)(R,{style:{"font-size":"14px"}},{default:i((()=>[(0,t.Wm)("div",x,[(0,t.Wm)("div",b,(0,o.zw)(s.name),1),q,(0,t.Wm)(F,{class:"q-my-sm"}),(0,t.Wm)("div",_,[(0,t.Wm)("div",C,[(0,t.Wm)($,{name:"mdi-radius",class:"q-mr-xs",style:{"font-size":"20px"}}),(0,t.Uk)("Radius: "+(0,o.zw)(s.radius)+" m ",1)])])])])),_:2},1024)])),_:2},1032,["lat-lng","icon"]),(0,t.Wm)(B,{"lat-lng":D.vehicleLatLng(s),radius:s.radius,"fill-color":"#717172","fill-opacity":.2,fill:!0,weight:.6,color:"#717172"},null,8,["lat-lng","radius","fill-opacity","weight"])])),_:2},1032,["center","zoom","options"])):((0,t.wg)(),(0,t.j4)("div",z,[(0,t.Wm)($,{name:"error",class:"text-h1 red-5"})]))])])])),_:2},1024)])),_:2},1024)])),_:2},1032,["label","modelValue","onUpdate:modelValue"])))),128))])),_:1},512)),[[l.F8,U.isActuallyLoaded]]):((0,t.wg)(),(0,t.j4)("div",I," No warehouse found. ")),(0,t.Wm)(se,{modelValue:U.showDeleteDialog,"onUpdate:modelValue":s[3]||(s[3]=e=>U.showDeleteDialog=e),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:i((()=>[(0,t.Wm)(O,{style:{width:"350px"}},{default:i((()=>[(0,t.Wm)(J,null,{default:i((()=>[A])),_:1}),(0,t.Wm)(J,{class:"row items-center"},{default:i((()=>[(0,t.Wm)("span",j,[(0,t.Uk)("To proceed to delete this warehouse, please enter its name: ("+(0,o.zw)(U.deleting.name)+")",1),Q,Z]),(0,t.Wm)(V,{modelValue:U.deleteInput,"onUpdate:modelValue":s[2]||(s[2]=e=>U.deleteInput=e),label:"Warehouse's Name"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(ee,{align:"right",class:"bg-white"},{default:i((()=>[(0,t.wy)((0,t.Wm)(E,{flat:"",label:"Cancel",class:"text-blue-9"},null,512),[[ie]]),(0,t.wy)((0,t.Wm)(E,{label:"Confirm",class:"text-white",color:"red-7",onClick:D.deleteWH,disable:U.deleteInput!==U.deleting.name},null,8,["onClick","disable"]),[[ie]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),e.$store.getters["auth/isSuperUser"]||e.$store.state.auth.user.level>=3?((0,t.wg)(),(0,t.j4)(ae,{key:2,position:"bottom-right",offset:[50,50]},{default:i((()=>[(0,t.Wm)(E,{fab:"",icon:"add",color:"blue-9",onClick:s[4]||(s[4]=s=>e.$router.push("/warehouses/create"))})])),_:1})):(0,t.kq)("",!0)])),_:1})):((0,t.wg)(),(0,t.j4)(te,{key:1,class:"flex flex-center"},{default:i((()=>[(0,t.Wm)("div",S,[(0,t.Wm)(oe,{color:"blue-9",size:"50px"})])])),_:1}))}));var D=a(385),$=a(8892);a(1475);const V={name:"Warehouses",components:{LMap:$.iA,LTileLayer:$.Hw,LMarker:$.$R,LTooltip:$.Gs,LCircle:$.J_},methods:{getMarkerIcon(e){return L.AwesomeMarkers.icon({prefix:"mdi",icon:"warehouse",markerColor:e.color,iconColor:"white"})},vehicleLatLng(e){return e.latitude?(0,D.latLng)(e.latitude,e.longitude):null},loadWarehouseList(e=""){""===e?this.$api.get("/warehouse/index").then((e=>{this.warehouses=e.data,this.isLoaded=!0,this.warehouses.forEach((e=>{this.zoom[e.id]=13})),this.isActuallyLoaded||this.$nextTick((()=>{this.warehouses.forEach((e=>{this.vehicleTabs[e.id]=!1})),this.isActuallyLoaded=!0}))})).catch((e=>{var s;this.$q.notify({message:null!==(s=e.response.data.message)&&void 0!==s?s:"Failed to execute this operation.",color:"red-9"})})):this.$api.post("/warehouse/search",{name:e}).then((e=>{this.warehouses=e.data,this.isLoaded=!0})).catch((e=>{var s;this.$q.notify({message:void 0!==e.response.data.messages&&e.response.data.messages.length?e.response.data.messages[0]:null!==(s=e.response.data.message)&&void 0!==s?s:"Failed to execute this operation.",color:"red-9"})}))},deleteWH(){this.$api.post("/warehouse/"+this.deleting.id+"/destroy").then((e=>{this.$q.notify({message:e.data.messages[0],color:"green-9"}),this.loadWarehouseList(this.search)})).catch((e=>{var s;this.$q.notify({message:void 0!==e.response.data.messages&&e.response.data.messages.length?e.response.data.messages[0]:null!==(s=e.response.data.message)&&void 0!==s?s:"Failed to execute this operation.",color:"red-9"})}))}},data(){return{isLoaded:!1,warehouses:[],search:"",deleting:null,deleteInput:"",showDeleteDialog:!1,isActuallyLoaded:!1,vehicleTabs:[],zoom:[]}},mounted(){this.loadWarehouseList()},watch:{search(e){this.loadWarehouseList(e)}}};var T=a(4379),M=a(4842),H=a(4554),P=a(7011),N=a(4615),E=a(151),Y=a(5589),F=a(7030),R=a(3414),K=a(2035),B=a(2350),G=a(2165),J=a(5869),O=a(6778),X=a(9367),ee=a(1007),se=a(9754),ae=a(6489),te=a(677),oe=a(7518),le=a.n(oe);V.render=U,V.__scopeId="data-v-ce1fd992";const ie=V;le()(V,"components",{QPage:T.Z,QInput:M.Z,QIcon:H.Z,QList:P.Z,QExpansionItem:N.Z,QCard:E.Z,QCardSection:Y.Z,QChip:F.Z,QItem:R.Z,QItemSection:K.Z,QItemLabel:B.Z,QBtn:G.Z,QSeparator:J.Z,QDialog:O.Z,QCardActions:X.Z,QPageSticky:ee.Z,QSpinner:se.Z}),le()(V,"directives",{Ripple:ae.Z,ClosePopup:te.Z})}}]);
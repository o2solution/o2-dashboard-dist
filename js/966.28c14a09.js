(self["webpackChunko2_dashboard"]=self["webpackChunko2_dashboard"]||[]).push([[966],{1475:function(){(function(e,o,t){"use strict";L.AwesomeMarkers={},L.AwesomeMarkers.version="2.0.1",L.AwesomeMarkers.Icon=L.Icon.extend({options:{iconSize:[35,45],iconAnchor:[17,42],popupAnchor:[1,-32],shadowAnchor:[10,12],shadowSize:[36,16],className:"awesome-marker",prefix:"glyphicon",spinClass:"fa-spin",extraClasses:"",icon:"home",markerColor:"blue",iconColor:"white"},initialize:function(e){e=L.Util.setOptions(this,e)},createIcon:function(){var e=o.createElement("div"),t=this.options;return t.icon&&(e.innerHTML=this._createInner()),t.bgPos&&(e.style.backgroundPosition=-t.bgPos.x+"px "+-t.bgPos.y+"px"),this._setIconStyles(e,"icon-"+t.markerColor),e},_createInner:function(){var e,o="",t="",a="",s=this.options;return e=s.icon.slice(0,s.prefix.length+1)===s.prefix+"-"?s.icon:s.prefix+"-"+s.icon,s.spin&&"string"===typeof s.spinClass&&(o=s.spinClass),s.iconColor&&("white"===s.iconColor||"black"===s.iconColor?t="icon-"+s.iconColor:a="style='color: "+s.iconColor+"' "),"<i "+a+"class='"+s.extraClasses+" "+s.prefix+" "+e+" "+o+" "+t+"'></i>"},_setIconStyles:function(e,o){var t,a=this.options,s=L.point(a["shadow"===o?"shadowSize":"iconSize"]);t="shadow"===o?L.point(a.shadowAnchor||a.iconAnchor):L.point(a.iconAnchor),!t&&s&&(t=s.divideBy(2,!0)),e.className="awesome-marker-"+o+" "+a.className,t&&(e.style.marginLeft=-t.x+"px",e.style.marginTop=-t.y+"px"),s&&(e.style.width=s.x+"px",e.style.height=s.y+"px")},createShadow:function(){var e=o.createElement("div");return this._setIconStyles(e,"shadow"),e}}),L.AwesomeMarkers.icon=function(e){return new L.AwesomeMarkers.Icon(e)}})(0,document)},7966:(e,o,t)=>{"use strict";t.r(o),t.d(o,{default:()=>_});var a=t(3673),s=t(2323);const r=(0,a.HX)("data-v-7ede6c81");(0,a.dD)("data-v-7ede6c81");const l=(0,a.Wm)("div",{class:"text-h4 q-mb-lg"},"Create New Warehouse",-1),n={class:"row q-gutter-y-md"},i={class:"col-xs-12 col-sm-6 col-md-4"},u=(0,a.Wm)("div",{class:"text-body2 q-pt-md"},"meter(s)",-1),c=(0,a.Wm)("div",{class:"text-subtitle1 text-grey-9"},"Warehouse Location",-1),d=(0,a.Wm)("div",{class:"text-body2 text-grey-6 q-mb-md"},"Click on the map to pick a location for the warehouse.",-1),h={class:"q-mb-md"},m=(0,a.Wm)("div",{class:"q-pl-xs full-width text-grey-8"},"Coordinates: ",-1),p=(0,a.Uk)(" Warehouse Location "),g={class:"row justify-end q-mt-md"};(0,a.Cn)();const w=r(((e,o,t,w,k,L)=>{const b=(0,a.up)("q-btn"),y=(0,a.up)("q-input"),f=(0,a.up)("q-select"),C=(0,a.up)("q-chip"),x=(0,a.up)("l-tile-layer"),q=(0,a.up)("l-tooltip"),v=(0,a.up)("l-marker"),W=(0,a.up)("l-circle"),z=(0,a.up)("l-map"),_=(0,a.up)("q-page");return L.hasPermission?((0,a.wg)(),(0,a.j4)(_,{key:0,padding:""},{default:r((()=>[(0,a.Wm)(b,{flat:"","no-caps":"",color:"blue-9",icon:"arrow_back",label:"back to warehouses list",class:"q-pl-none q-pr-xs q-mb-md",onClick:o[1]||(o[1]=o=>e.$router.push("/warehouses"))}),l,(0,a.Wm)("div",n,[(0,a.Wm)("div",i,[(0,a.Wm)(y,{filled:"",modelValue:k.name,"onUpdate:modelValue":o[2]||(o[2]=e=>k.name=e),label:"Warehouse Name","stack-label":"",class:"q-mb-lg q-pr-none q-mr-none",hint:"Type in your new warehouse's name. This can be shown on the dashboard map."},null,8,["modelValue"]),(0,a.Wm)(f,{class:"q-mb-md",filled:"",modelValue:k.markerColor,"onUpdate:modelValue":o[3]||(o[3]=e=>k.markerColor=e),hint:"This will be the warehouse's marker's color shown on the map. Pick a location using the map below to preview.",options:["red","darkred","lightred","orange","beige","green","darkgreen","lightgreen","blue","darkblue","lightblue","purple","darkpurple","pink","cadetblue","gray","lightgray","black"],label:"Warehouse Marker Color","stack-label":""},null,8,["modelValue"]),(0,a.Wm)(y,{filled:"",modelValue:k.radius,"onUpdate:modelValue":o[4]||(o[4]=e=>k.radius=e),"input-class":"text-right items-center",label:"Warehouse Radius","stack-label":"",mask:"#######",class:"q-mb-lg q-pr-none q-mr-none",hint:"Vehicles are considered inside the warehouse area once entered radius."},{append:r((()=>[u])),_:1},8,["modelValue"]),c,d,(0,a.Wm)("div",h,[m,(0,a.Wm)(y,{filled:"",modelValue:k.warehouseLatitude,"onUpdate:modelValue":o[5]||(o[5]=e=>k.warehouseLatitude=e),"input-class":"text-right items-center",label:"Warehouse Latitude","stack-label":"",class:"q-mb-lg q-pr-none q-mr-none"},null,8,["modelValue"]),(0,a.Wm)(y,{filled:"",modelValue:k.warehouseLongitude,"onUpdate:modelValue":o[6]||(o[6]=e=>k.warehouseLongitude=e),"input-class":"text-right items-center",label:"Warehouse Longitude","stack-label":"",class:"q-mb-lg q-pr-none q-mr-none"},null,8,["modelValue"]),(0,a.Wm)(C,{square:"",class:"text-grey-8"},{default:r((()=>{var e;return[(0,a.Uk)("Latitude: "+(0,s.zw)(null!==(e=(k.warehouseLatitude/1).toFixed(5))&&void 0!==e?e:"Not Set"),1)]})),_:1}),(0,a.Wm)(C,{square:"",class:"text-grey-8"},{default:r((()=>{var e;return[(0,a.Uk)("Longitude: "+(0,s.zw)(null!==(e=(k.warehouseLongitude/1).toFixed(5))&&void 0!==e?e:"Not Set"),1)]})),_:1})]),(0,a.Wm)(z,{center:k.center,style:{height:"40vh"},zoomAnimation:!0,"marker-zoom-animation":!0,zoom:k.zoom,onClick:L.mark,class:"rounded-borders",options:{attributionControl:!1,zoomSnap:.5}},{default:r((()=>[(0,a.Wm)(x,{url:"https://mt0.google.com/vt/lyrs=m&hl=en&x={x}&y={y}&z={z}&s={s}"}),L.warehouseLatLng?((0,a.wg)(),(0,a.j4)(v,{key:0,"lat-lng":L.warehouseLatLng,icon:L.markerIcon},{default:r((()=>[(0,a.Wm)(q,null,{default:r((()=>[p])),_:1})])),_:1},8,["lat-lng","icon"])):(0,a.kq)("",!0),L.warehouseLatLng&&k.warehouseLongitude?((0,a.wg)(),(0,a.j4)(W,{key:1,"lat-lng":L.warehouseLatLng,radius:k.radius,"fill-color":"#717172","fill-opacity":.2,fill:!0,weight:.6,color:"#717172"},null,8,["lat-lng","radius","fill-opacity","weight"])):(0,a.kq)("",!0)])),_:1},8,["center","zoom","onClick","options"]),(0,a.Wm)("div",g,[(0,a.Wm)(b,{color:"blue-9",label:"Create Warehouse",onClick:L.sendCreate},null,8,["onClick"])])])])])),_:1})):(0,a.kq)("",!0)}));var k=t(385),b=t(8892);t(1475);const y={name:"CreateWarehouse",components:{LMap:b.iA,LTileLayer:b.Hw,LMarker:b.$R,LTooltip:b.Gs,LCircle:b.J_},data(){return{name:"",center:(0,k.latLng)(0,0),warehouseLatitude:null,warehouseLongitude:null,zoom:6,radius:500,markerColor:"blue"}},computed:{hasPermission(){return!!this.$store.getters["auth/isSuperUser"]||this.$store.state.auth.user.level>=3},markerIcon(){return L.AwesomeMarkers.icon({prefix:"mdi",icon:"warehouse",markerColor:this.markerColor,iconColor:"white"})},warehouseLatLng(){return this.warehouseLatitude?(0,k.latLng)(this.warehouseLatitude,this.warehouseLongitude):null}},watch:{hasPermission(e){e||this.unauthorizedRedirect()}},mounted(){this.hasPermission?this.$api.get("/company/"+this.$store.getters["auth/user"].company.slug).then((e=>{var o=e.data;this.center=(0,k.latLng)(o.latitude,o.longitude),this.zoom=o.zoom})):this.unauthorizedRedirect()},methods:{mark(e){e.latlng&&(this.warehouseLatitude=e.latlng.lat,this.warehouseLongitude=e.latlng.lng)},sendCreate(){this.$api.post("/warehouse/store",{name:this.name,color:this.markerColor,latitude:this.warehouseLatitude,longitude:this.warehouseLongitude,radius:this.radius}).then((e=>{this.$router.push("/warehouses"),this.$q.notify({message:e.data.messages[0],color:"green-9"})})).catch((e=>{var o;this.$q.notify({message:null!==(o=e.response.data.message)&&void 0!==o?o:"Failed to execute this operation.",color:"red-9"})}))}}};var f=t(4379),C=t(2165),x=t(4842),q=t(3314),v=t(7030),W=t(7518),z=t.n(W);y.render=w,y.__scopeId="data-v-7ede6c81";const _=y;z()(y,"components",{QPage:f.Z,QBtn:C.Z,QInput:x.Z,QSelect:q.Z,QChip:v.Z})}}]);
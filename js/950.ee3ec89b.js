(self["webpackChunko2_dashboard"]=self["webpackChunko2_dashboard"]||[]).push([[950],{1475:function(){(function(e,a,t){"use strict";L.AwesomeMarkers={},L.AwesomeMarkers.version="2.0.1",L.AwesomeMarkers.Icon=L.Icon.extend({options:{iconSize:[35,45],iconAnchor:[17,42],popupAnchor:[1,-32],shadowAnchor:[10,12],shadowSize:[36,16],className:"awesome-marker",prefix:"glyphicon",spinClass:"fa-spin",extraClasses:"",icon:"home",markerColor:"blue",iconColor:"white"},initialize:function(e){e=L.Util.setOptions(this,e)},createIcon:function(){var e=a.createElement("div"),t=this.options;return t.icon&&(e.innerHTML=this._createInner()),t.bgPos&&(e.style.backgroundPosition=-t.bgPos.x+"px "+-t.bgPos.y+"px"),this._setIconStyles(e,"icon-"+t.markerColor),e},_createInner:function(){var e,a="",t="",s="",i=this.options;return e=i.icon.slice(0,i.prefix.length+1)===i.prefix+"-"?i.icon:i.prefix+"-"+i.icon,i.spin&&"string"===typeof i.spinClass&&(a=i.spinClass),i.iconColor&&("white"===i.iconColor||"black"===i.iconColor?t="icon-"+i.iconColor:s="style='color: "+i.iconColor+"' "),"<i "+s+"class='"+i.extraClasses+" "+i.prefix+" "+e+" "+a+" "+t+"'></i>"},_setIconStyles:function(e,a){var t,s=this.options,i=L.point(s["shadow"===a?"shadowSize":"iconSize"]);t="shadow"===a?L.point(s.shadowAnchor||s.iconAnchor):L.point(s.iconAnchor),!t&&i&&(t=i.divideBy(2,!0)),e.className="awesome-marker-"+a+" "+s.className,t&&(e.style.marginLeft=-t.x+"px",e.style.marginTop=-t.y+"px"),i&&(e.style.width=i.x+"px",e.style.height=i.y+"px")},createShadow:function(){var e=a.createElement("div");return this._setIconStyles(e,"shadow"),e}}),L.AwesomeMarkers.icon=function(e){return new L.AwesomeMarkers.Icon(e)}})(0,document)},950:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>Ce});t(7280);var s=t(3673),i=t(2323),l=t(8880);const o=(0,s.HX)("data-v-d65ebb54");(0,s.dD)("data-v-d65ebb54");const n=(0,s.Wm)("div",{class:"text-h4"},"Vehicles",-1),r=(0,s.Wm)("div",{class:"text-subtitle1 q-mb-lg"},"All vehicles registered in your company.",-1),d={class:"row q-gutter-y-sm"},m={class:"col-xs-12 col-sm-6"},c=(0,s.Wm)("div",{class:"q-pl-xs full-width text-grey-8"},"Profile: ",-1),h=(0,s.Wm)("div",{class:"q-pl-xs full-width text-grey-8"},"Permanent Drivers: ",-1),u=(0,s.Uk)("First: not assigned"),g=(0,s.Uk)("Second: not assigned"),p=(0,s.Wm)("div",{class:"q-pl-xs full-width text-grey-8 q-mt-md"},"Status/ Data: ",-1),w=(0,s.Wm)("div",{class:"q-pl-xs full-width text-grey-6"},"Data below are fetched from the API and can't be edited in the dashboard.",-1),v={key:6,class:"q-pl-xs full-width text-grey-6"},y=(0,s.Wm)("div",{class:"q-pl-xs full-width text-grey-8 q-mt-md"},"Commands: ",-1),f={class:"q-gutter-x-md q-gutter-y-sm"},k={class:"col-xs-12 col-sm-6"},x={class:"col-auto"},W={class:"text-grey-9"},b={class:"text-grey-5"},_={class:"text-grey-5"},q={class:"q-gutter-y-xs"},V={class:"text-grey-7"},I={class:"text-grey-7"},z={key:0,class:"q-gutter-y-xs"},C={class:"text-grey-7"},D={class:"text-grey-7"},U={key:1,class:"q-gutter-y-xs"},M={class:"text-grey-7"},A={class:"text-grey-7"},S={class:"text-grey-7"},P=(0,s.Wm)("div",{class:"q-mb-sm"},"Permanent Drivers: ",-1),E=(0,s.Uk)("First: not assigned"),j=(0,s.Uk)("Second: not assigned"),$={key:1,class:"row justify-center items-center"},T={key:1,class:"col-auto"},F=(0,s.Wm)("div",{class:"text-h6"},"Add Vehicle",-1),Q=(0,s.Wm)("div",{class:"text-body2 text-grey-5"},"Choose a name for this vehicle so that you can recognize it.",-1),Z=(0,s.Wm)("div",{class:"text-body2 text-grey-5"},"This should be the same IMEI as the vehicle you are adding that's registered with your API.",-1),H=(0,s.Wm)("div",{class:"text-body2 text-grey-5"},"This will be the vehicle's marker's color shown on the map.",-1),N=(0,s.Wm)("div",{class:"text-body2 text-grey-5"},[(0,s.Uk)("Enter an icon name to choose an marker icon for the vehicle. To see what icons are available and what their names are, visit "),(0,s.Wm)("a",{href:"https://materialdesignicons.com/"},"https://materialdesignicons.com/")],-1),Y={class:"text-h6"},R=(0,s.Wm)("div",{class:"text-body2 text-grey-5"},"Choose a name for this vehicle so that you can recognize it.",-1),B=(0,s.Wm)("div",{class:"text-body2 text-grey-5"},"This should be the same IMEI as the vehicle you are adding that's registered with your API.",-1),G=(0,s.Wm)("div",{class:"text-body2 text-grey-5"},"This will be the vehicle's marker's color shown on the map.",-1),O=(0,s.Wm)("div",{class:"text-body2 text-grey-5"},[(0,s.Uk)("Enter an icon name to choose an marker icon for the vehicle. To see what icons are available and what their names are, visit "),(0,s.Wm)("a",{href:"https://materialdesignicons.com/"},"https://materialdesignicons.com/")],-1),K=(0,s.Wm)("div",{class:"text-h6"},"Assign Permanent Driver",-1),X={class:"text-body2 text-grey-5"},J=(0,s.Wm)("div",{class:"text-h6"},"Are you sure?",-1),ee={class:"q-mb-md"},ae=(0,s.Wm)("br",null,null,-1),te=(0,s.Uk)("Although this won't affect your API, the dashboard will stop tracking this vehicle's location."),se={class:"col-auto"};(0,s.Cn)();const ie=o(((e,a,t,L,ie,le)=>{const oe=(0,s.up)("q-icon"),ne=(0,s.up)("q-input"),re=(0,s.up)("q-chip"),de=(0,s.up)("q-btn"),me=(0,s.up)("l-tile-layer"),ce=(0,s.up)("q-separator"),he=(0,s.up)("l-tooltip"),ue=(0,s.up)("l-marker"),ge=(0,s.up)("l-map"),pe=(0,s.up)("q-card-section"),we=(0,s.up)("q-card"),ve=(0,s.up)("q-expansion-item"),ye=(0,s.up)("q-list"),fe=(0,s.up)("q-select"),ke=(0,s.up)("q-card-actions"),xe=(0,s.up)("q-dialog"),We=(0,s.up)("q-item-section"),be=(0,s.up)("q-item-label"),_e=(0,s.up)("q-item"),qe=(0,s.up)("q-page-sticky"),Ve=(0,s.up)("q-page"),Ie=(0,s.up)("q-spinner"),ze=(0,s.Q2)("close-popup");return ie.isLoaded?((0,s.wg)(),(0,s.j4)(Ve,{key:0,padding:""},{default:o((()=>[n,r,(0,s.Wm)(ne,{modelValue:ie.search,"onUpdate:modelValue":a[1]||(a[1]=e=>ie.search=e),debounce:"500",filled:"",placeholder:"Search",hint:"Type in the vehicle's name",class:"q-mb-lg"},{append:o((()=>[(0,s.Wm)(oe,{name:"search"})])),_:1},8,["modelValue"]),ie.vehicles.length?(0,s.wy)(((0,s.wg)(),(0,s.j4)(ye,{key:0,bordered:"",class:"rounded-borders"},{default:o((()=>[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(ie.vehicles,(a=>((0,s.wg)(),(0,s.j4)(ve,{key:a.id,"expand-separator":"",icon:"airline_seat_recline_normal",label:a.name,"default-opened":"",modelValue:ie.vehicleTabs[a.id],"onUpdate:modelValue":e=>ie.vehicleTabs[a.id]=e},{default:o((()=>[(0,s.Wm)(we,null,{default:o((()=>[(0,s.Wm)(pe,null,{default:o((()=>[(0,s.Wm)("div",d,[(0,s.Wm)("div",m,[c,(0,s.Wm)(re,{square:"",class:"text-grey-8"},{default:o((()=>[(0,s.Uk)("Vehicle ID: "+(0,i.zw)(a.id),1)])),_:2},1024),a.driver?((0,s.wg)(),(0,s.j4)(re,{key:0,square:"",class:"text-grey-8"},{default:o((()=>[(0,s.Uk)("Current Driver: "+(0,i.zw)(a.driver.name)+" (ID: "+(0,i.zw)(a.driver.id)+")",1)])),_:2},1024)):(0,s.kq)("",!0),h,a.first_permanent_driver?((0,s.wg)(),(0,s.j4)(re,{key:1,square:"",class:"text-grey-8"},{default:o((()=>[(0,s.Uk)("First: "+(0,i.zw)(a.first_permanent_driver.name)+" (ID: "+(0,i.zw)(a.first_permanent_driver.id)+")",1)])),_:2},1024)):((0,s.wg)(),(0,s.j4)(re,{key:2,square:"",class:"text-grey-8"},{default:o((()=>[u])),_:1})),a.second_permanent_driver?((0,s.wg)(),(0,s.j4)(re,{key:3,square:"",class:"text-grey-8"},{default:o((()=>[(0,s.Uk)("Second: "+(0,i.zw)(a.second_permanent_driver.name)+" (ID: "+(0,i.zw)(a.second_permanent_driver.id)+")",1)])),_:2},1024)):((0,s.wg)(),(0,s.j4)(re,{key:4,square:"",class:"text-grey-8"},{default:o((()=>[g])),_:1})),p,a.agentid?((0,s.wg)(),(0,s.j4)(s.HY,{key:5},[w,(0,s.Wm)(re,{square:"",class:"text-grey-8"},{default:o((()=>[(0,s.Uk)("Ignition: "+(0,i.zw)(a.ignition),1)])),_:2},1024),(0,s.Wm)(re,{square:"",class:"text-grey-8"},{default:o((()=>[(0,s.Uk)("Agent ID: "+(0,i.zw)(a.agentid),1)])),_:2},1024),(0,s.Wm)(re,{square:"",class:"text-grey-8"},{default:o((()=>[(0,s.Uk)("Vehicle Type: "+(0,i.zw)(a.type),1)])),_:2},1024),(0,s.Wm)(re,{square:"",class:"text-grey-8"},{default:o((()=>[(0,s.Uk)("Vehicle Number: "+(0,i.zw)(a.vehicle_number),1)])),_:2},1024),(0,s.Wm)(re,{square:"",class:"text-grey-8"},{default:o((()=>[(0,s.Uk)("Current Mileage: "+(0,i.zw)(a.current_mileage),1)])),_:2},1024),(0,s.Wm)(re,{square:"",class:"text-grey-8"},{default:o((()=>[(0,s.Uk)("Coordinate: ("+(0,i.zw)((a.latitude/1).toFixed(5))+", "+(0,i.zw)((a.longitude/1).toFixed(5))+")",1)])),_:2},1024),(0,s.Wm)(re,{square:"",class:"text-grey-8"},{default:o((()=>[(0,s.Uk)("Speed: "+(0,i.zw)(a.speed)+" km/h",1)])),_:2},1024)],64)):((0,s.wg)(),(0,s.j4)("div",v,"Information for this vehicle is unavailable. Make sure you set the correct IMEI for the vehicle and API credentials for your company.")),e.$store.getters["auth/isSuperUser"]||e.$store.state.auth.user.level>=3?((0,s.wg)(),(0,s.j4)(s.HY,{key:7},[y,(0,s.Wm)("div",f,[(0,s.Wm)(de,{color:"blue-9",label:"Edit",icon:"edit",onClick:e=>{ie.editing=a,ie.showEditDialog=!0}},null,8,["onClick"]),(0,s.Wm)(de,{color:"blue-9",label:"Assign Permanent Driver",icon:"assignment",onClick:e=>{ie.assigning=a,ie.isDriverListLoaded=!1,ie.showAssignDialog=!0,le.loadDriverList()},disable:!0===ie.showAssignDialog&&!1===ie.isDriverListLoaded,loading:!0===ie.showAssignDialog&&!1===ie.isDriverListLoaded},null,8,["onClick","disable","loading"]),(0,s.Wm)(de,{color:"red-7",label:"Remove vehicle",icon:"delete",onClick:e=>{ie.deleting=a,ie.showDeleteDialog=!0}},null,8,["onClick"])])],64)):(0,s.kq)("",!0)]),(0,s.Wm)("div",k,[a.latitude?((0,s.wg)(),(0,s.j4)(ge,{key:0,zoomAnimation:!0,"marker-zoom-animation":!0,center:le.vehicleLatLng(a),zoom:ie.zoom[a.id],options:{attributionControl:!1,zoomSnap:.5},class:"rounded-borders"},{default:o((()=>[(0,s.Wm)(me,{url:"https://mt0.google.com/vt/lyrs=m&hl=en&x={x}&y={y}&z={z}&s={s}"}),(0,s.Wm)(ue,{"lat-lng":le.vehicleLatLng(a),icon:le.getMarkerIcon(a)},{default:o((()=>[(0,s.Wm)(he,{style:{"font-size":"14px"}},{default:o((()=>[(0,s.Wm)("div",x,[(0,s.Wm)("div",W,(0,i.zw)(a.name),1),(0,s.Wm)("div",b,"Vehicle (Type: "+(0,i.zw)(a.type)+")",1),(0,s.Wm)("div",_,"IMEI: "+(0,i.zw)(a.imei),1),(0,s.Wm)(ce,{class:"q-my-sm"}),(0,s.Wm)("div",q,[(0,s.Wm)("div",V,[(0,s.Wm)(oe,{name:"local_fire_department",class:"q-mr-xs",style:{"font-size":"20px"}}),(0,s.Uk)("Ignition: "+(0,i.zw)(a.ignition),1)]),(0,s.Wm)("div",I,[(0,s.Wm)(oe,{name:"speed",class:"q-mr-xs",style:{"font-size":"20px"}}),(0,s.Uk)("Speed: "+(0,i.zw)(a.speed)+" km/h ",1)])]),(0,s.Wm)(ce,{class:"q-my-sm"}),a.warehouse?((0,s.wg)(),(0,s.j4)("div",U,[(0,s.Wm)("div",M,[(0,s.Wm)(oe,{name:"mdi-warehouse",class:"q-mr-xs",style:{"font-size":"20px"}}),(0,s.Uk)("In Warehouse: "+(0,i.zw)(a.warehouse.name)+" (ID: "+(0,i.zw)(a.warehouse.id)+") ",1)])])):((0,s.wg)(),(0,s.j4)("div",z,[(0,s.Wm)("div",C,[(0,s.Wm)(oe,{name:"mdi-steering",class:"q-mr-xs",style:{"font-size":"20px"}}),(0,s.Uk)("Driver: "+(0,i.zw)(a.driver?a.driver.name:"Unknown"),1)]),(0,s.Wm)("div",D,[(0,s.Wm)(oe,{name:"confirmation_number",class:"q-mr-xs",style:{"font-size":"20px"}}),(0,s.Uk)("Gatepass Destination: "+(0,i.zw)(a.gatepass?a.gatepass.warehouse.name+(a.gatepass.reviewed?"":" (UNREVIEWED)"):"No gatepass issued"),1)])])),(0,s.Wm)(ce,{class:"q-my-sm"}),(0,s.Wm)("div",A,[(0,s.Wm)(oe,{name:"mdi-counter",class:"q-mr-xs",style:{"font-size":"20px"}}),(0,s.Uk)("Odometer: "+(0,i.zw)(a.current_mileage)+" km ",1)]),(0,s.Wm)(ce,{class:"q-my-sm"}),(0,s.Wm)("div",S,[P,(0,s.Wm)("div",null,[(0,s.Wm)(oe,{name:"airline_seat_recline_normal",class:"q-mr-xs",style:{"font-size":"20px"}}),a.first_permanent_driver?((0,s.wg)(),(0,s.j4)(s.HY,{key:0},[(0,s.Uk)("First: "+(0,i.zw)(a.first_permanent_driver.name)+" (ID: "+(0,i.zw)(a.first_permanent_driver.id)+")",1)],64)):((0,s.wg)(),(0,s.j4)(s.HY,{key:1},[E],64))]),(0,s.Wm)("div",null,[(0,s.Wm)(oe,{name:"airline_seat_recline_normal",class:"q-mr-xs",style:{"font-size":"20px"}}),a.second_permanent_driver?((0,s.wg)(),(0,s.j4)(s.HY,{key:0},[(0,s.Uk)("Second: "+(0,i.zw)(a.second_permanent_driver.name)+" (ID: "+(0,i.zw)(a.second_permanent_driver.id)+")",1)],64)):((0,s.wg)(),(0,s.j4)(s.HY,{key:1},[j],64))])])])])),_:2},1024)])),_:2},1032,["lat-lng","icon"])])),_:2},1032,["center","zoom","options"])):((0,s.wg)(),(0,s.j4)("div",$,[(0,s.Wm)(oe,{name:"error",class:"text-h1 red-5"})]))])])])),_:2},1024)])),_:2},1024)])),_:2},1032,["label","modelValue","onUpdate:modelValue"])))),128))])),_:1},512)),[[l.F8,ie.isActuallyLoaded]]):((0,s.wg)(),(0,s.j4)("div",T," No vehicle found. ")),(0,s.Wm)(xe,{modelValue:ie.showCreateDialog,"onUpdate:modelValue":a[6]||(a[6]=e=>ie.showCreateDialog=e),persistent:""},{default:o((()=>[(0,s.Wm)(we,{style:{"min-width":"350px","max-width":"450px"}},{default:o((()=>[(0,s.Wm)(pe,null,{default:o((()=>[F])),_:1}),(0,s.Wm)(pe,{class:"q-pt-none q-gutter-y-sm"},{default:o((()=>[(0,s.Wm)(ne,{filled:"",modelValue:ie.newName,"onUpdate:modelValue":a[2]||(a[2]=e=>ie.newName=e),label:"Vehicle Name","stack-label":""},null,8,["modelValue"]),Q,(0,s.Wm)(ne,{filled:"",modelValue:ie.newIMEI,"onUpdate:modelValue":a[3]||(a[3]=e=>ie.newIMEI=e),label:"Vehicle IMEI","stack-label":""},null,8,["modelValue"]),Z,(0,s.Wm)(fe,{class:"q-mb-md",filled:"",modelValue:ie.newMarkerColor,"onUpdate:modelValue":a[4]||(a[4]=e=>ie.newMarkerColor=e),options:["red","darkred","lightred","orange","beige","green","darkgreen","lightgreen","blue","darkblue","lightblue","purple","darkpurple","pink","cadetblue","gray","lightgray","black"],label:"Vehicle Marker Color","stack-label":""},null,8,["modelValue"]),H,(0,s.Wm)(ne,{filled:"",modelValue:ie.newMarkerIcon,"onUpdate:modelValue":a[5]||(a[5]=e=>ie.newMarkerIcon=e),label:"Vehicle Marker Icon","stack-label":""},{append:o((()=>[(0,s.Wm)(oe,{name:"mdi-"+ie.newMarkerIcon},null,8,["name"])])),_:1},8,["modelValue"]),N])),_:1}),(0,s.Wm)(ke,{align:"right",class:"text-primary"},{default:o((()=>[(0,s.wy)((0,s.Wm)(de,{flat:"",label:"Cancel"},null,512),[[ze]]),(0,s.wy)((0,s.Wm)(de,{flat:"",label:"Add",onClick:le.createVehicle},null,8,["onClick"]),[[ze]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)(xe,{modelValue:ie.showEditDialog,"onUpdate:modelValue":a[11]||(a[11]=e=>ie.showEditDialog=e),persistent:""},{default:o((()=>[(0,s.Wm)(we,{style:{"min-width":"350px","max-width":"450px"}},{default:o((()=>[(0,s.Wm)(pe,null,{default:o((()=>[(0,s.Wm)("div",Y,"Edit Vehicle: "+(0,i.zw)(ie.editing.imei),1)])),_:1}),(0,s.Wm)(pe,{class:"q-pt-none q-gutter-y-sm"},{default:o((()=>[(0,s.Wm)(ne,{filled:"",modelValue:ie.editing.name,"onUpdate:modelValue":a[7]||(a[7]=e=>ie.editing.name=e),label:"Vehicle Name","stack-label":""},null,8,["modelValue"]),R,(0,s.Wm)(ne,{filled:"",modelValue:ie.editing.imei,"onUpdate:modelValue":a[8]||(a[8]=e=>ie.editing.imei=e),label:"Vehicle IMEI","stack-label":""},null,8,["modelValue"]),B,(0,s.Wm)(fe,{class:"q-mb-md",filled:"",modelValue:ie.editing.color,"onUpdate:modelValue":a[9]||(a[9]=e=>ie.editing.color=e),options:["red","darkred","lightred","orange","beige","green","darkgreen","lightgreen","blue","darkblue","lightblue","purple","darkpurple","pink","cadetblue","gray","lightgray","black"],label:"Vehicle Marker Color","stack-label":""},null,8,["modelValue"]),G,(0,s.Wm)(ne,{filled:"",modelValue:ie.editing.icon,"onUpdate:modelValue":a[10]||(a[10]=e=>ie.editing.icon=e),label:"Vehicle Marker Icon","stack-label":""},{append:o((()=>[(0,s.Wm)(oe,{name:"mdi-"+ie.editing.icon},null,8,["name"])])),_:1},8,["modelValue"]),O])),_:1}),(0,s.Wm)(ke,{align:"right",class:"text-primary"},{default:o((()=>[(0,s.wy)((0,s.Wm)(de,{flat:"",label:"Cancel"},null,512),[[ze]]),(0,s.wy)((0,s.Wm)(de,{flat:"",label:"Submit",onClick:le.updateVehicle},null,8,["onClick"]),[[ze]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),ie.isDriverListLoaded?((0,s.wg)(),(0,s.j4)(xe,{key:2,modelValue:ie.showAssignDialog,"onUpdate:modelValue":a[14]||(a[14]=e=>ie.showAssignDialog=e),persistent:""},{default:o((()=>[(0,s.Wm)(we,{style:{"min-width":"350px","max-width":"450px"}},{default:o((()=>[(0,s.Wm)(pe,null,{default:o((()=>[K,(0,s.Wm)("div",X,"for vehicle: "+(0,i.zw)(ie.assigning.name)+" (ID: "+(0,i.zw)(ie.assigning.id)+")",1)])),_:1}),(0,s.Wm)(pe,{class:"q-pt-none q-gutter-y-sm"},{default:o((()=>[(0,s.Wm)(fe,{class:"q-mb-md",filled:"",clearable:"",modelValue:ie.newFirstPerma,"onUpdate:modelValue":a[12]||(a[12]=e=>ie.newFirstPerma=e),options:ie.drivers,label:"First Permanent Driver","stack-label":""},{option:o((e=>[(0,s.Wm)(_e,e.itemProps,{default:o((()=>[(0,s.Wm)(We,{avatar:""},{default:o((()=>[(0,s.Wm)(oe,{name:"airline_seat_recline_normal"})])),_:1}),(0,s.Wm)(We,null,{default:o((()=>[(0,s.Wm)(be,{innerHTML:e.opt.name},null,8,["innerHTML"]),(0,s.Wm)(be,{caption:""},{default:o((()=>[(0,s.Uk)("ID: "+(0,i.zw)(e.opt.id),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","options"]),(0,s.Wm)(fe,{class:"q-mb-md",filled:"",clearable:"",modelValue:ie.newSecondPerma,"onUpdate:modelValue":a[13]||(a[13]=e=>ie.newSecondPerma=e),options:ie.drivers,label:"Second Permanent Driver","stack-label":""},{option:o((e=>[(0,s.Wm)(_e,e.itemProps,{default:o((()=>[(0,s.Wm)(We,{avatar:""},{default:o((()=>[(0,s.Wm)(oe,{name:"airline_seat_recline_normal"})])),_:1}),(0,s.Wm)(We,null,{default:o((()=>[(0,s.Wm)(be,{innerHTML:e.opt.name},null,8,["innerHTML"]),(0,s.Wm)(be,{caption:""},{default:o((()=>[(0,s.Uk)("ID: "+(0,i.zw)(e.opt.id),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","options"])])),_:1}),(0,s.Wm)(ke,{align:"right",class:"text-primary"},{default:o((()=>[(0,s.wy)((0,s.Wm)(de,{flat:"",label:"Cancel"},null,512),[[ze]]),(0,s.wy)((0,s.Wm)(de,{flat:"",label:"Submit",onClick:le.assignDriver},null,8,["onClick"]),[[ze]])])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,s.kq)("",!0),(0,s.Wm)(xe,{modelValue:ie.showDeleteDialog,"onUpdate:modelValue":a[15]||(a[15]=e=>ie.showDeleteDialog=e),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:o((()=>[(0,s.Wm)(we,{style:{width:"350px"}},{default:o((()=>[(0,s.Wm)(pe,null,{default:o((()=>[J])),_:1}),(0,s.Wm)(pe,{class:"row items-center"},{default:o((()=>[(0,s.Wm)("span",ee,[(0,s.Uk)("You are removing this vehicle from the dashboard: "+(0,i.zw)(ie.deleting.name)+"(ID: "+(0,i.zw)(ie.deleting.id)+", IMEI: "+(0,i.zw)(ie.deleting.imei)+")",1),ae,te])])),_:1}),(0,s.Wm)(ke,{align:"right",class:"bg-white"},{default:o((()=>[(0,s.wy)((0,s.Wm)(de,{flat:"",label:"Cancel",class:"text-blue-9"},null,512),[[ze]]),(0,s.wy)((0,s.Wm)(de,{label:"Confirm",class:"text-white",color:"red-7",onClick:le.deleteVehicle},null,8,["onClick"]),[[ze]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),e.$store.getters["auth/isSuperUser"]||e.$store.state.auth.user.level>=3?((0,s.wg)(),(0,s.j4)(qe,{key:3,position:"bottom-right",offset:[50,50]},{default:o((()=>[(0,s.Wm)(de,{fab:"",icon:"add",color:"blue-9",onClick:a[16]||(a[16]=e=>ie.showCreateDialog=!0)})])),_:1})):(0,s.kq)("",!0)])),_:1})):((0,s.wg)(),(0,s.j4)(Ve,{key:1,class:"flex flex-center"},{default:o((()=>[(0,s.Wm)("div",se,[(0,s.Wm)(Ie,{color:"blue-9",size:"50px"})])])),_:1}))}));var le=t(385),oe=t(8892);t(1475);const ne={name:"Vehicles",data(){return{isLoaded:!1,isActuallyLoaded:!1,search:"",vehicles:[],zoom:[],vehicleTabs:[],newName:"",newIMEI:"",newMarkerColor:"blue",newMarkerIcon:"truck",showCreateDialog:!1,showDeleteDialog:!1,deleting:null,showEditDialog:!1,editing:null,timer:null,drivers:[],showAssignDialog:!1,isDriverListLoaded:!1,assigning:null,newFirstPerma:null,newSecondPerma:null}},components:{LMap:oe.iA,LTileLayer:oe.Hw,LMarker:oe.$R,LTooltip:oe.Gs},methods:{loadDriverList(){this.$api.get("/driver/index").then((e=>{this.drivers=e.data,this.drivers.forEach((e=>{e.label=e.name,this.assigning.first_permanent_driver&&e.id===this.assigning.first_permanent_driver.id&&(this.newFirstPerma=e),this.assigning.second_permanent_driver&&e.id===this.assigning.second_permanent_driver.id&&(this.newSecondPerma=e)})),this.isDriverListLoaded=!0})).catch((e=>{var a;this.$q.notify({message:null!==(a=e.response.data.message)&&void 0!==a?a:"Failed to execute this operation.",color:"red-9"})}))},assignDriver(){this.$api.post("/vehicle/"+this.assigning.id+"/permanent/update",{first:this.newFirstPerma?this.newFirstPerma.id:null,second:this.newSecondPerma?this.newSecondPerma.id:null}).then((e=>{this.$q.notify({message:e.data.messages[0],color:"green-9"}),this.loadVehicleList(this.search)})).catch((e=>{var a;this.$q.notify({message:null!==(a=e.response.data.message)&&void 0!==a?a:"Failed to execute this operation.",color:"red-9"})}))},getMarkerIcon(e){return L.AwesomeMarkers.icon({prefix:"mdi",icon:e.icon,markerColor:e.color,iconColor:"white"})},vehicleLatLng(e){return e.latitude?(0,le.latLng)(e.latitude,e.longitude):null},loadVehicleList(e=""){""===e?this.$api.get("/vehicle/index").then((e=>{this.vehicles=e.data,this.isLoaded=!0,this.isActuallyLoaded||(this.vehicles.forEach((e=>{this.zoom[e.id]=13})),this.$nextTick((()=>{this.vehicles.forEach((e=>{this.vehicleTabs[e.id]=!1})),this.isActuallyLoaded=!0})))})).catch((e=>{var a;this.$q.notify({message:null!==(a=e.response.data.message)&&void 0!==a?a:"Failed to execute this operation.",color:"red-9"})})):this.$api.post("/vehicle/search",{name:e}).then((e=>{this.vehicles=e.data,this.isLoaded=!0})).catch((e=>{var a;this.$q.notify({message:void 0!==e.response.data.messages&&e.response.data.messages.length?e.response.data.messages[0]:null!==(a=e.response.data.message)&&void 0!==a?a:"Failed to execute this operation.",color:"red-9"})}))},createVehicle(){this.$api.post("/vehicle/store",{name:this.newName,imei:this.newIMEI,color:this.newMarkerColor,icon:this.newMarkerIcon}).then((e=>{this.$q.notify({message:e.data.messages[0],color:"green-9"}),this.loadVehicleList(this.search)})).catch((e=>{var a;this.$q.notify({message:void 0!==e.response.data.messages&&e.response.data.messages.length?e.response.data.messages[0]:null!==(a=e.response.data.message)&&void 0!==a?a:"Failed to execute this operation.",color:"red-9"})})),this.newName="",this.newIMEI="",this.newMarkerColor="blue",this.newMarkerIcon="truck"},updateVehicle(){this.$api.post("/vehicle/"+this.editing.id+"/update",this.editing).then((e=>{this.$q.notify({message:e.data.messages[0],color:"green-9"}),this.loadDriversList(this.search)})).catch((e=>{var a;console.log(e),this.$q.notify({message:void 0!==e.response.data.messages&&e.response.data.messages.length?e.response.data.messages[0]:null!==(a=e.response.data.message)&&void 0!==a?a:"Failed to execute this operation.",color:"red-9"})}))},deleteVehicle(){this.$api.post("/vehicle/"+this.deleting.id+"/destroy").then((e=>{this.$q.notify({message:e.data.messages[0],color:"green-9"}),this.loadVehicleList(this.search)})).catch((e=>{var a;this.$q.notify({message:void 0!==e.response.data.messages&&e.response.data.messages.length?e.response.data.messages[0]:null!==(a=e.response.data.message)&&void 0!==a?a:"Failed to execute this operation.",color:"red-9"})}))}},mounted(){this.loadVehicleList(),this.timer=setInterval((()=>{this.loadVehicleList(this.search)}),5e3)},beforeUnmount(){clearInterval(this.timer)}};var re=t(4379),de=t(4842),me=t(4554),ce=t(7011),he=t(4615),ue=t(151),ge=t(5589),pe=t(7030),we=t(2165),ve=t(5869),ye=t(6778),fe=t(3314),ke=t(9367),xe=t(3414),We=t(2035),be=t(2350),_e=t(1007),qe=t(9754),Ve=t(677),Ie=t(7518),ze=t.n(Ie);ne.render=ie,ne.__scopeId="data-v-d65ebb54";const Ce=ne;ze()(ne,"components",{QPage:re.Z,QInput:de.Z,QIcon:me.Z,QList:ce.Z,QExpansionItem:he.Z,QCard:ue.Z,QCardSection:ge.Z,QChip:pe.Z,QBtn:we.Z,QSeparator:ve.Z,QDialog:ye.Z,QSelect:fe.Z,QCardActions:ke.Z,QItem:xe.Z,QItemSection:We.Z,QItemLabel:be.Z,QPageSticky:_e.Z,QSpinner:qe.Z}),ze()(ne,"directives",{ClosePopup:Ve.Z})}}]);
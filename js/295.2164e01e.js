"use strict";(self["webpackChunko2_dashboard"]=self["webpackChunko2_dashboard"]||[]).push([[295],{1295:(e,t,s)=>{s.r(t),s.d(t,{default:()=>D});var a=s(3673),l=s(2323);const o=(0,a.HX)("data-v-d4b0b0be");(0,a.dD)("data-v-d4b0b0be");const i=(0,a.Wm)("div",{class:"text-h4"},"Alerts",-1),d=(0,a.Wm)("div",{class:"text-subtitle1 q-mb-lg"},"Important messages from the dashboard system.",-1),r={class:"row justify-end"},n={key:1,class:"col-auto text-grey-5 text-h5"},u=(0,a.Wm)("div",{class:"text-h6"},"Are you sure?",-1),c={class:"q-mb-md"},h={class:"col-auto"};(0,a.Cn)();const m=o(((e,t,s,m,p,g)=>{const b=(0,a.up)("q-card-section"),f=(0,a.up)("q-btn"),w=(0,a.up)("q-card"),y=(0,a.up)("q-expansion-item"),v=(0,a.up)("q-list"),W=(0,a.up)("q-card-actions"),x=(0,a.up)("q-dialog"),_=(0,a.up)("q-page"),k=(0,a.up)("q-spinner"),q=(0,a.Q2)("close-popup");return g.hasPermission&&p.isLoaded?((0,a.wg)(),(0,a.j4)(_,{key:0,padding:""},{default:o((()=>[i,d,p.alerts.length?((0,a.wg)(),(0,a.j4)(v,{key:0,bordered:"",class:"rounded-borders"},{default:o((()=>[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(p.alerts,(e=>((0,a.wg)(),(0,a.j4)(y,{key:e.id,"expand-separator":"",icon:"notification_important",label:e.title},{default:o((()=>[(0,a.Wm)(w,null,{default:o((()=>[(0,a.Wm)(b,null,{default:o((()=>[(0,a.Uk)((0,l.zw)(e.content),1)])),_:2},1024),(0,a.Wm)(b,null,{default:o((()=>[(0,a.Wm)("div",r,[(0,a.Wm)(f,{color:"red-7",label:"Delete this alert",icon:"delete",onClick:t=>{p.deleting=e,p.showDeleteDialog=!0}},null,8,["onClick"])])])),_:2},1024)])),_:2},1024)])),_:2},1032,["label"])))),128))])),_:1})):((0,a.wg)(),(0,a.j4)("div",n," No alerts for now. ")),(0,a.Wm)(x,{modelValue:p.showDeleteDialog,"onUpdate:modelValue":t[1]||(t[1]=e=>p.showDeleteDialog=e),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:o((()=>[(0,a.Wm)(w,{style:{width:"350px"}},{default:o((()=>[(0,a.Wm)(b,null,{default:o((()=>[u])),_:1}),(0,a.Wm)(b,{class:"row items-center"},{default:o((()=>[(0,a.Wm)("span",c,"This alert will be permanently deleted for every user in your company: "+(0,l.zw)(p.deleting.title),1)])),_:1}),(0,a.Wm)(W,{align:"right",class:"bg-white"},{default:o((()=>[(0,a.wy)((0,a.Wm)(f,{flat:"",label:"Cancel",class:"text-blue-9"},null,512),[[q]]),(0,a.wy)((0,a.Wm)(f,{label:"Confirm",class:"text-white",color:"red-7",onClick:g.deleteAlert},null,8,["onClick"]),[[q]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})):((0,a.wg)(),(0,a.j4)(_,{key:1,class:"flex flex-center"},{default:o((()=>[(0,a.Wm)("div",h,[(0,a.Wm)(k,{color:"blue-9",size:"50px"})])])),_:1}))}));s(7280);const p={name:"Alerts",data(){return{isLoaded:!1,alerts:[],showDeleteDialog:!1,deleting:null}},methods:{loadAlertList(e=""){this.$api.get("/alert/index").then((e=>{this.alerts=e.data,this.isLoaded=!0})).catch((e=>{var t;this.$q.notify({message:null!==(t=e.response.data.message)&&void 0!==t?t:"Failed to execute this operation.",color:"red-9"})}))},deleteAlert(){this.$api.post("/alert/"+this.deleting.id+"/destroy").then((e=>{this.$q.notify({message:e.data.messages[0],color:"green-9"}),this.loadAlertList(this.search)})).catch((e=>{var t;this.$q.notify({message:void 0!==e.response.data.messages&&e.response.data.messages.length?e.response.data.messages[0]:null!==(t=e.response.data.message)&&void 0!==t?t:"Failed to execute this operation.",color:"red-9"})}))}},computed:{hasPermission(){return!!this.$store.getters["auth/isSuperUser"]||this.$store.state.auth.user.level>=3}},watch:{hasPermission(e){e||this.unauthorizedRedirect()}},mounted(){this.hasPermission?this.loadAlertList():this.unauthorizedRedirect()}};var g=s(4379),b=s(7011),f=s(4615),w=s(151),y=s(5589),v=s(2165),W=s(6778),x=s(9367),_=s(9754),k=s(677),q=s(7518),C=s.n(q);p.render=m,p.__scopeId="data-v-d4b0b0be";const D=p;C()(p,"components",{QPage:g.Z,QList:b.Z,QExpansionItem:f.Z,QCard:w.Z,QCardSection:y.Z,QBtn:v.Z,QDialog:W.Z,QCardActions:x.Z,QSpinner:_.Z}),C()(p,"directives",{ClosePopup:k.Z})}}]);